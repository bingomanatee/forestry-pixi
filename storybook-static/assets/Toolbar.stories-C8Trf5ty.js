import{k as Nt,o as T,n as B,_ as $t,s as M,c as Vt,d as ot,e as A,T as Mt,B as Et,C as R,f as zt,h as K,g as Ot,i as Ut,F as jt,H as Gt,A as rt,j as ht,l as N}from"./TickerForest-7hloE1rI.js";import"./preload-helper-PPVm8Dsz.js";function Xt(o,i){return o.startsWith(i)}function Yt(o,i){return o.slice(i.length)}function Z(o){return o!==null&&typeof o=="object"&&!Array.isArray(o)}function qt(o,i,e={}){const{statePrefix:n="$",merge:r=!1,transformValue:h}=e;function a(f,l=[],d=[]){if(!Z(f)){const g=h?h(f,l,d):f,v=l.join(".");if(r&&o.has(v,d)){const C=o.get(v,d);Z(C)&&Z(g)?o.set(v,d,{...C,...g}):o.set(v,d,g)}else o.set(v,d,g);return}for(const[g,v]of Object.entries(f))if(Xt(g,n)){const C=Yt(g,n),J=C==="*"?d:[...d,C];a(v,l,J)}else{const C=[...l,g];a(v,C,d)}}a(i)}function Jt(o,i={}){const e=new Nt;return qt(e,o,i),e}const Kt=$t(["icon","iconVertical","text","inline"]),Zt=T({id:M(),sprite:A().optional(),icon:A().optional(),iconUrl:M().optional(),rightSprite:A().optional(),rightIcon:A().optional(),rightIconUrl:M().optional(),label:M().optional(),mode:Kt.optional(),isDisabled:ot().optional().default(!1),onClick:Vt().optional(),variant:M().optional(),bitmapFont:M().optional()}),Dt=T({r:B().min(0).max(1),g:B().min(0).max(1),b:B().min(0).max(1)});function V(o){const i=Math.round(o.r*255),e=Math.round(o.g*255),n=Math.round(o.b*255);return i<<16|e<<8|n}var k=function(o,i,e,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?o!==i||!r:!i.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(o,e):r?r.value=e:i.set(o,e),e},t=function(o,i,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?o!==i||!n:!i.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(o):n?n.value:i.get(o)},s,b,L,p,c,P,y,x,S,$,I,z,D,_,F,H,It,ct,dt,ft,W,Q,ut,pt,tt,it,gt,Tt,Wt,X,Y,q,bt,u,mt,wt,_t,St,yt,xt,kt,Bt,E,et,vt,Pt,Ft,nt,Ht;function Qt(o){return!!o&&typeof o=="object"&&"renderer"in o&&"ticker"in o}function ti(o){return Qt(o)?{app:o}:{ticker:o.ticker}}class Rt extends Mt{constructor(i,e,n,r){super({value:{dirty:!0}},ti(n)),s.add(this),L.set(this,void 0),p.set(this,void 0),c.set(this,void 0),P.set(this,!1),y.set(this,void 0),x.set(this,void 0),S.set(this,void 0),$.set(this,void 0),I.set(this,void 0),z.set(this,void 0),D.set(this,void 0),_.set(this,void 0),F.set(this,void 0),H.set(this,void 0),X.set(this,()=>{t(this,y,"f")||this.setHovered(!0)}),Y.set(this,()=>{t(this,y,"f")||this.setHovered(!1)}),q.set(this,()=>{!t(this,y,"f")&&t(this,p,"f").onClick&&t(this,p,"f").onClick()}),this.id=i.id,k(this,L,e,"f"),k(this,p,i,"f"),k(this,c,t(b,b,"m",It).call(b,i),"f"),k(this,y,i.isDisabled??!1,"f"),k(this,x,new Et({id:i.id,area:{x:0,y:0,width:{mode:"px",value:0},height:{mode:"px",value:0},px:"s",py:"s"},align:{x:"s",y:"s",direction:t(this,c,"f")==="iconVertical"?"column":"row"}}),"f"),k(this,S,new R({label:`button-${this.id}`,...r}),"f"),k(this,$,new zt,"f"),k(this,I,new R({label:`button-content-${this.id}`}),"f"),t(this,S,"f").addChild(t(this,$,"f")),t(this,S,"f").addChild(t(this,I,"f")),t(this,s,"m",Tt).call(this),t(this,s,"m",Wt).call(this)}get container(){return t(this,S,"f")}get rect(){return t(this,x,"f").rect}get children(){return t(this,x,"f").children}get isHovered(){return t(this,P,"f")}get isDisabled(){return t(this,y,"f")}get mode(){return t(this,c,"f")}isDirty(){return this.value.dirty}clearDirty(){this.set("dirty",!1)}markDirty(){this.value.dirty||this.set("dirty",!0),this.queueResolve()}resolve(){t(this,s,"m",Pt).call(this),t(this,S,"f").position.set(t(this,x,"f").x,t(this,x,"f").y),t(this,s,"m",Ft).call(this),t(this,z,"f")&&t(this,s,"m",nt).call(this,t(this,z,"f")),t(this,D,"f")&&t(this,s,"m",nt).call(this,t(this,D,"f")),t(this,s,"m",Ht).call(this)}setHovered(i){t(this,P,"f")!==i&&(k(this,P,i,"f"),this.markDirty())}setDisabled(i){t(this,y,"f")!==i&&(k(this,y,i,"f"),t(this,S,"f").eventMode=i?"none":"static",t(this,S,"f").cursor=i?"default":"pointer",this.markDirty())}setPosition(i,e){t(this,x,"f").value.area.x===i&&t(this,x,"f").value.area.y===e||(t(this,x,"f").setPosition(i,e),this.markDirty())}setForcedSize(i,e){const n=a=>{if(a!==void 0){if(!Number.isFinite(a)||a<0)throw new Error(`${this.id}: forced size must be finite and >= 0`);return a}},r=n(i),h=n(e);return t(this,F,"f")===r&&t(this,H,"f")===h?!1:(k(this,F,r,"f"),k(this,H,h,"f"),this.markDirty(),!0)}getConfig(){return t(this,p,"f")}getPreferredSize(){const{width:i,height:e}=t(this,x,"f").rect;return{width:i,height:e}}cleanup(){t(this,S,"f").off("pointerenter",t(this,X,"f")),t(this,S,"f").off("pointerleave",t(this,Y,"f")),t(this,S,"f").off("pointertap",t(this,q,"f")),super.cleanup()}}b=Rt,L=new WeakMap,p=new WeakMap,c=new WeakMap,P=new WeakMap,y=new WeakMap,x=new WeakMap,S=new WeakMap,$=new WeakMap,I=new WeakMap,z=new WeakMap,D=new WeakMap,_=new WeakMap,F=new WeakMap,H=new WeakMap,X=new WeakMap,Y=new WeakMap,q=new WeakMap,s=new WeakSet,It=function(i){return i.mode?i.mode:!i.sprite&&!i.icon&&i.label?"text":(i.sprite||i.icon)&&i.label?"inline":"icon"},ct=function(){return t(this,c,"f")==="icon"||t(this,c,"f")==="iconVertical"||t(this,c,"f")==="inline"&&!!(t(this,p,"f").sprite||t(this,p,"f").icon)},dt=function(){return t(this,c,"f")==="inline"&&!!(t(this,p,"f").rightSprite||t(this,p,"f").rightIcon)},ft=function(){return!!t(this,p,"f").label&&t(this,c,"f")!=="icon"},W=function(i){if(typeof i!="string")return;const e=i.trim();return e.length?e:void 0},Q=function(i){if(!i)return;const e=i.texture,n=e?.source;return t(b,b,"m",W).call(b,n?.resource?.src)??t(b,b,"m",W).call(b,n?.src)??t(b,b,"m",W).call(b,e?.resource?.src)??t(b,b,"m",W).call(b,e?.url)},ut=function(i){if(!i)return;const e=i.children?.[0];return t(this,s,"m",Q).call(this,e)},pt=function(i,e,n){const r=i==="right"?t(this,p,"f").rightIconUrl:t(this,p,"f").iconUrl;return t(b,b,"m",W).call(b,r)??t(this,s,"m",Q).call(this,e)??t(this,s,"m",ut).call(this,n)},tt=function(i,e){return t(this,x,"f").addChild(i,{id:`${this.id}-${i}`,order:e,area:{x:0,y:0,width:{mode:"px",value:0},height:{mode:"px",value:0},px:"s",py:"s"},align:{x:"s",y:"s",direction:"column"}})},it=function(i,e){const n=i==="left"?"icon-left":"icon-right",r=i==="right"?t(this,p,"f").rightSprite:t(this,p,"f").sprite,h=i==="right"?t(this,p,"f").rightIcon:t(this,p,"f").icon,a=t(this,s,"m",tt).call(this,n,e),f=t(this,s,"m",pt).call(this,i,r,h);f&&a.setContent({type:"url",value:f});const l=new R({label:`${this.id}-${n}-host`});return r?("anchor"in r&&r.anchor&&r.anchor.set(0),l.addChild(r)):h&&l.addChild(h),t(this,I,"f").addChild(l),{tree:a,host:l,sprite:r,container:h,role:i}},gt=function(i){const e=t(this,s,"m",tt).call(this,"label",i);e.setContent({type:"text",value:t(this,p,"f").label??""});const n=new R({label:`${this.id}-label-host`}),r=new Ot({text:t(this,p,"f").label??"",style:new K({fontSize:13,fill:16777215,align:"center",fontFamily:t(this,p,"f").bitmapFont??"Arial"})});return n.addChild(r),t(this,I,"f").addChild(n),{tree:e,host:n,textDisplay:r}},Tt=function(){let i=0;t(this,s,"a",ct)&&(k(this,z,t(this,s,"m",it).call(this,"left",i),"f"),i+=1),t(this,s,"a",ft)&&(k(this,_,t(this,s,"m",gt).call(this,i),"f"),i+=1),t(this,s,"a",dt)&&k(this,D,t(this,s,"m",it).call(this,"right",i),"f")},Wt=function(){t(this,S,"f").eventMode=t(this,y,"f")?"none":"static",t(this,S,"f").cursor=t(this,y,"f")?"default":"pointer",t(this,S,"f").on("pointerenter",t(this,X,"f")),t(this,S,"f").on("pointerleave",t(this,Y,"f")),t(this,S,"f").on("pointertap",t(this,q,"f"))},bt=function(){return t(this,y,"f")?["disabled"]:t(this,P,"f")?["hover"]:[]},u=function(...i){const e=t(this,s,"m",bt).call(this),n=t(this,p,"f").variant;let r=[];if(t(this,c,"f")==="text"?r=["text"]:t(this,c,"f")==="inline"?r=["inline"]:t(this,c,"f")==="iconVertical"&&(r=["iconVertical"]),n){const h=t(this,L,"f").match({nouns:["button",n,...r,...i],states:e});if(h!==void 0)return h}return t(this,L,"f").match({nouns:["button",...r,...i],states:e})},mt=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?12:4},wt=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?6:4},_t=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?4:0},St=function(){return t(this,c,"f")==="inline"?{x:16,y:16}:{x:32,y:32}},yt=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?{r:1,g:1,b:1}:{r:0,g:0,b:0}},xt=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?1:.5},kt=function(){return t(this,c,"f")==="text"||t(this,c,"f")==="inline"?0:1},Bt=function(){const i=t(this,s,"m",u).call(this,"borderRadius")??t(this,s,"m",_t).call(this),e=t(this,s,"m",u).call(this,"stroke","color")??{r:.5,g:.5,b:.5},n=t(this,s,"m",u).call(this,"stroke","alpha")??1,r=t(this,s,"m",u).call(this,"stroke","width")??t(this,s,"m",kt).call(this),h=t(this,s,"m",u).call(this,"fill","color"),a=t(this,s,"m",u).call(this,"fill","alpha"),f={borderRadius:i};return h&&(a??1)>0?f.fill={color:h,alpha:t(this,y,"f")?(a??1)*.5:a??1}:(t(this,c,"f")==="text"||t(this,c,"f")==="inline")&&(f.fill={color:{r:.33,g:.67,b:.6},alpha:t(this,y,"f")?.5:1}),e&&r>0&&(f.stroke={color:e,width:r,alpha:n}),f},E=function(i){const e=t(this,s,"m",St).call(this),n=i.role==="right",r=n?t(this,s,"m",u).call(this,"rightIcon","size","x")??t(this,s,"m",u).call(this,"icon","size","x")??e.x:t(this,s,"m",u).call(this,"icon","size","x")??e.x,h=n?t(this,s,"m",u).call(this,"rightIcon","size","y")??t(this,s,"m",u).call(this,"icon","size","y")??e.y:t(this,s,"m",u).call(this,"icon","size","y")??e.y,a=n?t(this,s,"m",u).call(this,"rightIcon","alpha")??t(this,s,"m",u).call(this,"icon","alpha")??1:t(this,s,"m",u).call(this,"icon","alpha")??1,f=n?t(this,s,"m",u).call(this,"rightIcon","tint")??t(this,s,"m",u).call(this,"icon","tint"):t(this,s,"m",u).call(this,"icon","tint");return{width:r,height:h,alpha:a,tint:f}},et=function(){const i=t(this,s,"m",u).call(this,"label","fontSize")??13,e=t(this,s,"m",u).call(this,"label","color")??t(this,s,"m",yt).call(this),n=t(this,s,"m",u).call(this,"label","alpha")??t(this,s,"m",xt).call(this);return{textStyle:{fontSize:i,fill:V(e),align:"center",fontFamily:t(this,p,"f").bitmapFont??"Arial"},alpha:t(this,y,"f")?n*.5:n}},vt=function(i){const e=t(this,p,"f").label??"",n=typeof i.fontSize=="number"?i.fontSize:13,r=Math.max(0,e.length*n*.6),h=Math.max(0,n*1.2);let a=r,f=h;if(t(this,_,"f"))try{t(this,_,"f").textDisplay.text=e,t(this,_,"f").textDisplay.style=new K(i);const l=t(this,_,"f").textDisplay.getLocalBounds();Number.isFinite(l.width)&&l.width>=0&&(a=l.width),Number.isFinite(l.height)&&l.height>=0&&(f=l.height)}catch{}try{const l=Ut.measureText(e,i);Number.isFinite(l.width)&&l.width>=0&&(a=l.width),Number.isFinite(l.height)&&l.height>=0&&(f=l.height)}catch{}return{width:a,height:f}},Pt=function(){const e=(t(this,c,"f")==="iconVertical"?"column":"row")==="row",n=t(this,c,"f")==="iconVertical"?t(this,s,"m",u).call(this,"iconGap")??4:t(this,c,"f")==="inline"?t(this,s,"m",u).call(this,"iconGap")??8:0,r=t(this,s,"m",u).call(this,"padding","x")??t(this,s,"m",mt).call(this),h=t(this,s,"m",u).call(this,"padding","y")??t(this,s,"m",wt).call(this);t(this,x,"f").setDirection(e?"row":"column");const a=[];if(t(this,z,"f")){const m=t(this,s,"m",E).call(this,t(this,z,"f"));a.push({tree:t(this,z,"f").tree,width:m.width,height:m.height})}if(t(this,_,"f")){const{textStyle:m}=t(this,s,"m",et).call(this),w=t(this,s,"m",vt).call(this,m);a.push({tree:t(this,_,"f").tree,width:w.width,height:w.height})}if(t(this,D,"f")){const m=t(this,s,"m",E).call(this,t(this,D,"f"));a.push({tree:t(this,D,"f").tree,width:m.width,height:m.height})}const f=e?a.reduce((m,w)=>m+w.width,0)+Math.max(0,a.length-1)*n:a.reduce((m,w)=>Math.max(m,w.width),0),l=e?a.reduce((m,w)=>Math.max(m,w.height),0):a.reduce((m,w)=>m+w.height,0)+Math.max(0,a.length-1)*n;for(const[m,w]of a.entries()){const at=m*n,Lt=e?at:0;let lt=e?0:at;e&&t(this,c,"f")==="inline"&&(lt=Math.max(0,(l-w.height)/2)),w.tree.setPosition(Lt,lt),w.tree.setWidthPx(w.width),w.tree.setHeightPx(w.height)}const d=f+r*2,g=l+h*2,v=t(this,F,"f")===void 0?d:Math.max(t(this,F,"f"),d),C=t(this,H,"f")===void 0?g:Math.max(t(this,H,"f"),g);t(this,x,"f").setWidthPx(v),t(this,x,"f").setHeightPx(C);const J=r+Math.max(0,(v-d)/2),At=h+Math.max(0,(C-g)/2);t(this,I,"f").position.set(J,At)},Ft=function(){const i=t(this,s,"m",Bt).call(this),{width:e,height:n}=t(this,x,"f").rect;t(this,$,"f").clear();const r=i.borderRadius??0;i.fill?.color&&(t(this,$,"f").roundRect(0,0,e,n,r),t(this,$,"f").fill({color:V(i.fill.color),alpha:i.fill.alpha??1})),i.stroke?.color&&i.stroke.width&&i.stroke.width>0&&(t(this,$,"f").roundRect(0,0,e,n,r),t(this,$,"f").stroke({color:V(i.stroke.color),alpha:i.stroke.alpha??1,width:i.stroke.width}))},nt=function(i){const e=t(this,s,"m",E).call(this,i);if(i.host.position.set(i.tree.x,i.tree.y),i.sprite){i.sprite.width=e.width,i.sprite.height=e.height,i.sprite.alpha=t(this,y,"f")?e.alpha*.5:e.alpha,i.sprite.tint=e.tint?V(e.tint):16777215;return}if(i.container){const n=i.container.getLocalBounds();n.width>0&&n.height>0&&i.container.scale.set(e.width/n.width,e.height/n.height),i.container.alpha=t(this,y,"f")?e.alpha*.5:e.alpha}},Ht=function(){if(!t(this,_,"f"))return;const{textStyle:i,alpha:e}=t(this,s,"m",et).call(this);t(this,_,"f").host.position.set(t(this,_,"f").tree.x,t(this,_,"f").tree.y),t(this,_,"f").textDisplay.text=t(this,p,"f").label??"",t(this,_,"f").tree.setContent({type:"text",value:t(this,p,"f").label??""}),t(this,_,"f").textDisplay.style=new K(i),t(this,_,"f").textDisplay.alpha=e};const ii=Zt,ei=T({color:Dt,alpha:B().min(0).max(1).optional()}),oi=T({color:Dt,width:B().min(0),alpha:B().min(0).max(1).optional()}),ni=T({fill:ei.optional(),stroke:oi.optional(),borderRadius:B().min(0).optional()}),ri=T({top:B().optional(),right:B().optional(),bottom:B().optional(),left:B().optional()}),si=T({id:M().optional(),buttons:Gt(ii).default([]),spacing:B().min(0).default(8),orientation:$t(["horizontal","vertical"]).default("horizontal"),fillButtons:ot().optional(),width:B().min(0).optional(),height:B().min(0).optional(),fixedSize:ot().optional(),padding:jt([B(),ri]).optional(),background:ni.optional(),style:A().optional(),bitmapFont:M().optional()}),ai={icon:{"$*":{size:{x:80,y:80},alpha:1},$hover:{size:{x:80,y:80},alpha:1},$disabled:{size:{x:80,y:80},alpha:.5}},padding:{"$*":{x:4,y:4}},stroke:{"$*":{color:{r:.5,g:.5,b:.5},alpha:1,width:1},$hover:{color:{r:.7,g:.7,b:.7},alpha:1,width:1},$disabled:{color:{r:.85,g:.85,b:.85},alpha:.5,width:1}},fill:{$disabled:{color:{r:.9,g:.9,b:.9},alpha:.3}},inline:{padding:{"$*":{x:12,y:6}},borderRadius:{"$*":4},iconGap:{"$*":8},icon:{"$*":{size:{x:16,y:16},alpha:1},$hover:{size:{x:16,y:16},alpha:1},$disabled:{size:{x:16,y:16},alpha:.5}},fill:{"$*":{color:{r:.33,g:.67,b:.6},alpha:1},$hover:{color:{r:.27,g:.73,b:.53},alpha:1},$disabled:{color:{r:.5,g:.5,b:.5},alpha:.5}},stroke:{"$*":{color:{r:.5,g:.5,b:.5},alpha:0,width:0},$hover:{color:{r:.5,g:.5,b:.5},alpha:0,width:0},$disabled:{color:{r:.67,g:.67,b:.67},alpha:1,width:2}},label:{fontSize:{"$*":13},color:{"$*":{r:1,g:1,b:1},$hover:{r:1,g:1,b:1},$disabled:{r:.7,g:.7,b:.7}},alpha:{"$*":1,$hover:1,$disabled:.5}}},text:{padding:{"$*":{x:12,y:6}},borderRadius:{"$*":4},fill:{"$*":{color:{r:.33,g:.67,b:.6},alpha:1},$hover:{color:{r:.27,g:.73,b:.53},alpha:1},$disabled:{color:{r:.5,g:.5,b:.5},alpha:.5}},stroke:{"$*":{color:{r:.5,g:.5,b:.5},alpha:0,width:0},$hover:{color:{r:.5,g:.5,b:.5},alpha:0,width:0},$disabled:{color:{r:.67,g:.67,b:.67},alpha:1,width:2}},label:{fontSize:{"$*":13},color:{"$*":{r:1,g:1,b:1},$hover:{r:1,g:1,b:1},$disabled:{r:.7,g:.7,b:.7}},alpha:{"$*":1,$hover:1,$disabled:.5}}},iconVertical:{padding:{"$*":{x:4,y:4}},icon:{"$*":{size:{x:80,y:80},alpha:1},$hover:{size:{x:80,y:80},alpha:1},$disabled:{size:{x:80,y:80},alpha:.5}},label:{fontSize:{"$*":12},padding:{"$*":4},color:{"$*":{r:0,g:0,b:0},$hover:{r:0,g:0,b:0}},alpha:{"$*":.5,$hover:1}}}},li={button:ai},hi={top:0,right:0,bottom:0,left:0};function ci(o){return!!o&&typeof o=="object"&&"renderer"in o&&"ticker"in o}function di(o){return ci(o)?{app:o}:{ticker:o.ticker}}function fi(o){return o===void 0?{...hi}:typeof o=="number"?{top:o,right:o,bottom:o,left:o}:{top:o.top??0,right:o.right??0,bottom:o.bottom??0,left:o.left??0}}function Ct(o){const i=Math.round(o.r*255),e=Math.round(o.g*255),n=Math.round(o.b*255);return i<<16|e<<8|n}class st extends Mt{#l;#t;#e=new Map;#s=new Map;#i;#o;#a;#n={x:0,y:0,width:0,height:0};#r;constructor(i,e){super({value:{dirty:!0}},di(e));const n=si.parse(i);this.id=n.id??"toolbar",this.#l=n.style??Jt(li),this.#t=n,this.#r=fi(n.padding),this.#i=new R({label:`toolbar-${this.id}`}),this.#o=new zt,this.#a=new R({label:`toolbar-content-${this.id}`}),this.#i.addChild(this.#o),this.#i.addChild(this.#a);for(const r of n.buttons)this.#h(r,n.bitmapFont)}get container(){return this.#i}get rect(){return{x:this.#i.position.x,y:this.#i.position.y,width:this.#n.width,height:this.#n.height}}get styleTree(){return this.#l}get toolbarConfig(){return this.#t}#c(i){const e=i.setHovered.bind(i),n=i.setDisabled.bind(i);return i.setHovered=r=>{e(r),this.markDirty()},i.setDisabled=r=>{n(r),this.markDirty()},()=>{i.setHovered=e,i.setDisabled=n}}#h(i,e){const n=new Rt({...i,bitmapFont:i.bitmapFont??e},this.#l,{ticker:this.ticker}),r=this.#c(n);return this.#e.set(i.id,n),this.#s.set(i.id,r),this.#a.addChild(n.container),n}addButton(i){const e=this.#h(i,this.#t.bitmapFont);return e.kickoff(),this.markDirty(),e}removeButton(i){const e=this.#e.get(i);e&&(this.#s.get(i)?.(),this.#s.delete(i),this.#e.delete(i),this.#a.removeChild(e.container),e.cleanup(),this.markDirty())}getButton(i){return this.#e.get(i)}getButtons(){return Array.from(this.#e.values())}setPosition(i,e){this.#i.position.set(i,e)}#d(){const i=this.getButtons();if(!i.length)return{width:0,height:0};const e=this.#t.spacing??8,n=this.#t.orientation??"horizontal",r=this.#t.fillButtons??!1;let h=!1;if(r)if(n==="vertical"){const l=i.reduce((d,g)=>Math.max(d,g.rect.width),0);for(const d of i)h=d.setForcedSize(l,void 0)||h}else{const l=i.reduce((d,g)=>Math.max(d,g.rect.height),0);for(const d of i)h=d.setForcedSize(void 0,l)||h}else for(const l of i)h=l.setForcedSize(void 0,void 0)||h;let a=0,f=0;for(const[l,d]of i.entries()){const{width:g,height:v}=d.rect;n==="vertical"?((d.rect.x!==0||d.rect.y!==a)&&d.setPosition(0,a),a+=v,l<i.length-1&&(a+=e),f=Math.max(f,g)):((d.rect.x!==a||d.rect.y!==0)&&d.setPosition(a,0),a+=g,l<i.length-1&&(a+=e),f=Math.max(f,v))}return n==="vertical"?(h&&this.markDirty(),{width:f,height:a}):(h&&this.markDirty(),{width:a,height:f})}#f(i,e){const n=i+this.#r.left+this.#r.right,r=e+this.#r.top+this.#r.bottom;return this.#t.fixedSize??!1?{width:this.#t.width??n,height:this.#t.height??r}:{width:Math.max(this.#t.width??0,n),height:Math.max(this.#t.height??0,r)}}#u(i){if(this.#o.clear(),!i)return;const e=i.borderRadius??0;i.fill?.color&&(this.#o.roundRect(0,0,this.#n.width,this.#n.height,e),this.#o.fill({color:Ct(i.fill.color),alpha:i.fill.alpha??1})),i.stroke?.color&&i.stroke.width&&i.stroke.width>0&&(this.#o.roundRect(0,0,this.#n.width,this.#n.height,e),this.#o.stroke({color:Ct(i.stroke.color),alpha:i.stroke.alpha??1,width:i.stroke.width}))}isDirty(){return this.value.dirty}clearDirty(){this.set("dirty",!1)}markDirty(){this.value.dirty||this.set("dirty",!0),this.queueResolve()}kickoff(){for(const i of this.#e.values())i.kickoff();super.kickoff()}resolve(){const i=this.#d(),e=this.#f(i.width,i.height);this.#n={x:this.#i.position.x,y:this.#i.position.y,width:e.width,height:e.height},this.#a.position.set(this.#r.left,this.#r.top),this.#u(this.#t.background)}cleanup(){for(const[i,e]of this.#e.entries())this.#s.get(i)?.(),e.cleanup();this.#s.clear(),this.#e.clear(),super.cleanup()}}const gi={title:"Toolbar",args:{orientation:"horizontal",spacing:8},render:o=>{const i=document.createElement("div");i.style.width="100%",i.style.height="600px",i.style.position="relative";const e=new rt;return e.init({width:800,height:600,backgroundColor:15790320,antialias:!0}).then(async()=>{i.appendChild(e.canvas);const[n]=await Promise.all([ht.load("/toolbar-data.json"),ht.load("/image_font/image_font.xml.fnt")]),r=new st({id:"main-toolbar",buttons:[{id:"image",sprite:new N(n.textures["ctrl-image@4x.png"]),label:"Image",mode:"iconVertical",onClick:()=>console.log("Image button clicked")},{id:"caption",sprite:new N(n.textures["ctrl-caption@4x.png"]),label:"Caption",mode:"iconVertical",onClick:()=>console.log("Caption button clicked"),isDisabled:!0},{id:"frame",sprite:new N(n.textures["ctrl-frame@4x.png"]),label:"Frame",mode:"iconVertical",onClick:()=>console.log("Frame button clicked")},{id:"actor",sprite:new N(n.textures["ctrl-actor@4x.png"]),label:"Actor",mode:"iconVertical",onClick:()=>console.log("Actor button clicked")}],spacing:o.spacing,orientation:o.orientation,bitmapFont:"Inter_18pt-Medium",padding:8,background:{fill:{color:{r:.95,g:.95,b:.95},alpha:1},stroke:{color:{r:.7,g:.7,b:.7},width:1,alpha:1},borderRadius:8}},e);r.container.position.set(50,50),e.stage.addChild(r.container),r.kickoff()}),i}},O={},U={args:{orientation:"vertical"}},j={render:o=>{const i=document.createElement("div");i.style.width="100%",i.style.height="600px",i.style.position="relative";const e=new rt;return e.init({width:800,height:600,backgroundColor:15790320,antialias:!0}).then(async()=>{i.appendChild(e.canvas);const n=new st({id:"text-toolbar",buttons:[{id:"image",label:"Image",onClick:()=>console.log("Image button clicked")},{id:"caption",label:"Caption",onClick:()=>console.log("Caption button clicked")},{id:"done",label:"Done",onClick:()=>console.log("Done button clicked"),isDisabled:!0}],spacing:o.spacing,orientation:o.orientation,padding:8,background:{fill:{color:{r:.95,g:.95,b:.95},alpha:1},stroke:{color:{r:.7,g:.7,b:.7},width:1,alpha:1},borderRadius:8}},e);n.container.position.set(50,50),e.stage.addChild(n.container),n.kickoff()}),i}},G={args:{orientation:"vertical"},render:o=>{const i=document.createElement("div");i.style.width="100%",i.style.height="600px",i.style.position="relative";const e=new rt;return e.init({width:800,height:600,backgroundColor:15790320,antialias:!0}).then(async()=>{i.appendChild(e.canvas);const n=new st({id:"text-toolbar-vertical",buttons:[{id:"image",label:"Image",onClick:()=>console.log("Image button clicked")},{id:"caption",label:"Caption",onClick:()=>console.log("Caption button clicked")},{id:"done",label:"Done",onClick:()=>console.log("Done button clicked"),isDisabled:!0}],spacing:o.spacing,orientation:o.orientation,fillButtons:!0,padding:8,background:{fill:{color:{r:.95,g:.95,b:.95},alpha:1},stroke:{color:{r:.7,g:.7,b:.7},width:1,alpha:1},borderRadius:8}},e);n.container.position.set(50,50),e.stage.addChild(n.container),n.kickoff()}),i}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:"{}",...O.parameters?.docs?.source}}};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:`{
  args: {
    orientation: 'vertical'
  }
}`,...U.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  render: args => {
    const wrapper = document.createElement('div');
    wrapper.style.width = '100%';
    wrapper.style.height = '600px';
    wrapper.style.position = 'relative';
    const app = new Application();
    app.init({
      width: 800,
      height: 600,
      backgroundColor: 0xf0f0f0,
      antialias: true
    }).then(async () => {
      wrapper.appendChild(app.canvas);

      // Create toolbar with text-only buttons (no sprites)
      const toolbar = new ToolbarStore({
        id: 'text-toolbar',
        buttons: [{
          id: 'image',
          label: 'Image',
          onClick: () => console.log('Image button clicked')
        }, {
          id: 'caption',
          label: 'Caption',
          onClick: () => console.log('Caption button clicked')
        }, {
          id: 'done',
          label: 'Done',
          onClick: () => console.log('Done button clicked'),
          isDisabled: true
        }],
        spacing: args.spacing,
        orientation: args.orientation,
        padding: 8,
        background: {
          fill: {
            color: {
              r: 0.95,
              g: 0.95,
              b: 0.95
            },
            alpha: 1
          },
          stroke: {
            color: {
              r: 0.7,
              g: 0.7,
              b: 0.7
            },
            width: 1,
            alpha: 1
          },
          borderRadius: 8
        }
      }, app);
      toolbar.container.position.set(50, 50);
      app.stage.addChild(toolbar.container);
      toolbar.kickoff();
    });
    return wrapper;
  }
}`,...j.parameters?.docs?.source}}};G.parameters={...G.parameters,docs:{...G.parameters?.docs,source:{originalSource:`{
  args: {
    orientation: 'vertical'
  },
  render: args => {
    const wrapper = document.createElement('div');
    wrapper.style.width = '100%';
    wrapper.style.height = '600px';
    wrapper.style.position = 'relative';
    const app = new Application();
    app.init({
      width: 800,
      height: 600,
      backgroundColor: 0xf0f0f0,
      antialias: true
    }).then(async () => {
      wrapper.appendChild(app.canvas);
      const toolbar = new ToolbarStore({
        id: 'text-toolbar-vertical',
        buttons: [{
          id: 'image',
          label: 'Image',
          onClick: () => console.log('Image button clicked')
        }, {
          id: 'caption',
          label: 'Caption',
          onClick: () => console.log('Caption button clicked')
        }, {
          id: 'done',
          label: 'Done',
          onClick: () => console.log('Done button clicked'),
          isDisabled: true
        }],
        spacing: args.spacing,
        orientation: args.orientation,
        fillButtons: true,
        padding: 8,
        background: {
          fill: {
            color: {
              r: 0.95,
              g: 0.95,
              b: 0.95
            },
            alpha: 1
          },
          stroke: {
            color: {
              r: 0.7,
              g: 0.7,
              b: 0.7
            },
            width: 1,
            alpha: 1
          },
          borderRadius: 8
        }
      }, app);
      toolbar.container.position.set(50, 50);
      app.stage.addChild(toolbar.container);
      toolbar.kickoff();
    });
    return wrapper;
  }
}`,...G.parameters?.docs?.source}}};const bi=["Horizontal","Vertical","TextOnly","TextOnlyVertical"];export{O as Horizontal,j as TextOnly,G as TextOnlyVertical,U as Vertical,bi as __namedExportsOrder,gi as default};
